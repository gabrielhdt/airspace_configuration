\documentclass[twoside,twocolumn]{article}

\usepackage{fontspec}
\usepackage{polyglossia}
\usepackage{cite}
\usepackage{hyperref}
\usepackage{unicode-math}
\usepackage{amsmath,amsthm,stmaryrd}
\usepackage{algorithm,algpseudocode}
\usepackage{paralist}

\DeclareMathOperator{\argmax}{argmax}


\usepackage[hmarginratio=1:1,top=32mm,columnsep=20pt]{geometry}
\usepackage[hang, small,labelfont=bf,up,textfont=it,up]{caption}
\usepackage{booktabs}

\usepackage{lettrine}

\usepackage{enumitem}
\setlist[itemize]{noitemsep}

\usepackage{abstract}
% Set the "Abstract" text to bold
\renewcommand{\abstractnamefont}{\normalfont\bfseries}
% Set the abstract itself to small italic text
\renewcommand{\abstracttextfont}{\normalfont\small\itshape}

% Allows customization of titles
\usepackage{titlesec}
% Roman numerals for the sections
\renewcommand\thesection{\Roman{section}}
% roman numerals for subsections
\renewcommand\thesubsection{\roman{subsection}}
% Change the look of the section titles
\titleformat{\section}[block]{\large\scshape\centering}{\thesection.}{1em}{}
% Change the look of the section titles
\titleformat{\subsection}[block]{\large}{\thesubsection.}{1em}{}

% Headers and footers
\usepackage{fancyhdr}
% All pages have headers and footers
\pagestyle{fancy}
% Blank out the default header
% \fancyhead{}
% Blank out the default footer
\fancyfoot{}
% Custom header text
% \fancyhead[C]{Running title $\bullet$ May 2016 $\bullet$ Vol. XXI, No. 1}
% Custom footer text
\fancyfoot[RO,LE]{\thepage}
\usepackage{titling} % Customizing the title section

\usepackage{hyperref} % For hyperlinks in the PDF

\title{Airspace configuration decision based on Monte-Carlo tree search}
\author{Gabriel~Hondet, Beno\^{\i}t Viry}
\date{\today}

%-----------------------------------------------------------------------------
%	TITLE SECTION
%-----------------------------------------------------------------------------

% Move the title up
\setlength{\droptitle}{-4\baselineskip}
% Article title formatting
\pretitle{\begin{center}\Huge\bfseries}
% Article title closing formatting
\posttitle{\end{center}}

\renewcommand{\maketitlehookd}{%
\begin{abstract}

\end{abstract}
}

%-----------------------------------------------------------------------------

\begin{document}

\maketitle

\section{Introduction}
The airspace is divided into sectors, themselves divided into elementary
modules. Each sector is managed by a controller working position composed of two
controllers.
During the day, sectors are split and merged to be able to
manage the varying traffic. Splitting creates smaller sectors and is therefore
used when traffic gets too dense. On the opposite, merging sectors allows fewer
controllers to manage the same airspace, and is therefore used when traffic
becomes sparse.

Currently, configuration is mainly decided on the fly by chief officer (TODO).
This decision is based on the actual workload on each position. This intuitive
approach does not take into account future traffic. This papers aims at
providing a method offering a smoother workload during the day.

Several methods have been considered to solve the dynamic airspace configuration
problem, for instance via genetic algorithms in~\cite{sergeeva2017dynamic},
constraint local search in~\cite{jagare2013constraint}, integer linear
programming in~\cite{treimuth2016branch} or dynamic programming
in~\cite{bloem2010dynamic}.

As seen in~\cite{treimuth2016branch}
or~\cite{sergeeva2017dynamic}, a temporal sequence of configurations will be
provided. Two costs will be considered to create the sequence, namely the cost
associated to each configuration and transition. The former is based on the
workload estimated for one sector given a neural network
(see~\cite{gianazza2010forecasting}).

The sequence of configurations will be represented as a tree. The resulting
sequence will therefore be a path from the root to a leaf of this tree. This
problem is highly combinatorial (partitioning of the airspace). Knowing that a
sochastic tree search algorithm has been honing from a good
player~\cite{gelly2012go} to the best one with AlphaGo on one of the most highly
combinatorial game wich is the game of Go entices us to use one for this
problem. The Monte Carlo tree search~\cite{browne2012survey} algorithm will be
used to fullfill this task.



\section{Previous related works}
\label{sec:previous_related_works}

The dynamic airspace configuration problem requires a model of the airspace. As
done in~\cite{sergeeva2017dynamic} or~\cite{treimuth2016branch} the airspace
is modelled via a graph. In those graphs, vertices represent elementary modules
and an edge links two adjacent modules. In~\cite{treimuth2016branch}, to be
able to produce a sequence of configurations, the graph is time dependent.
An other way to model the problem is to use a constrained set of
configurations as in~\cite{gianazza2010forecasting} and~\cite{bloem2010dynamic}.
This way any configuration will match specified requirements, which can be
qualified hard constraints.

In most cases the cost of a configuration is based on the workload. Each
approach seems to give their own representation of the workload. For instance,
~\cite{bedouet2016} determined workload density proportionally to the time
spent by aircraft in each sector. A simpler version~\cite{sergeeva2017dynamic}
only uses the number of aircraft. On the other hand, more complex methods,
involving many more inputs are also available. For
instance,~\cite{gianazza2010forecasting} used several indicators, such as sector
volume, or vertical incoming flows in the next 15 and 60 minutes. Those
indicators ease the training of a neural network forecasting the workload.

Other soft constraints appear to be relevant to have a better model of
the problem. For instance in~\cite{sergeeva2017dynamic} and~\cite{bedouet2016} a
coordination cost is defined. It represents the surplus of work added by
flights travelling from one sector to an other. The shape of the
resulting sector is considered, as the simpler is
the shape, the easier it is to manage. Complex shapes are therefore avoided,
thanks to the notion of compactness in~\cite{jagare2013constraint} and balconies
in~\cite{sergeeva2017dynamic}. To smooth the transition between two
configurations, the work associated with the reallocation of one or more modules
is evaluated. This can be used in a cost function aimed to be minimised
(in~\cite{bedouet2016}).



\section{Algorithm}

The task of building an optimal sequence of partitions (lowering
as much as possible the workload of each controller) is fulfilled by a
stochastic tree search method, namely the Monte Carlo tree search. To assess the
exactness of the results, an exact method (here A\(^*\)) is used.

\subsection{Monte Carlo tree search overview}
Monte-Carlo is a best-first search method using stochastic simulations. It is
composed of four phases, namely
\begin{compactenum}
    \item selection,
    \item expansion,
    \item simulation,
    \item backpropagation.
\end{compactenum}
Those phases are repeated until a stopping criterium is reached,
see\ref{alg:gen_mcts} (memory usage or time).
\begin{algorithm}
    \caption{General MCTS~\cite{browne2012survey}}\label{alg:gen_mcts}
    \begin{algorithmic}
        \Procedure{MctsSearchTree}{$v_0$}
        \While{within computational budget}
        \State{} \([v^l_1, \dots, v^l_i] \gets\) \Call{TreePolicy}{$v_0$}
        \State{} \(\Delta \gets\) \Call{DefaultPolicy}{$v^l_i$}
        \State{} \(r \gets\) \Call{Reward}{$\Delta$}
        \State{} \Call{Backup}{$[v^l_1, \dots, v^l_i]$, $r$}
        \EndWhile{}
        \EndProcedure{}
    \end{algorithmic}
\end{algorithm}

\subsection{UCT selection}
\begin{algorithm}
    \caption{Extending the search tree}
    \begin{algorithmic}
        \Function{TreePolicy}{$v$}
        \State{} \([v_1, \dots, v_n] \gets\) \Call{Select}{$v$}
        \If{$v_n$ is terminal}
        \State{} \Return{$[v_1, \dots, v_n]$}
        \Else{}
        \State{} \([v_1, \dots, v_{n+1}] \gets\)
        \Call{Expand}{$[v_1, \dots, v_n]$}
        \State{} \Return{$[v_1, \dots, v_{n+1}]$}
        \EndIf{}
        \EndFunction{}
    \end{algorithmic}
    \begin{algorithmic}
        \Function{Select}{$v, a$}
        \If{$v$ is terminal or fully expanded}
        \State{} \Return{$[v, a]$}
        \Else{}
        \State{} fav\(\gets\) \Call{BestChild}{$v$}
        \State{} \Return{\Call{Select}{fav, $[v, a]$}}
        \EndIf{}
        \EndFunction{}
    \end{algorithmic}
    \begin{algorithmic}
        \Function{BestChild}{$v$}
        \State{} \Return{$\argmax\{\Call{UCB}{v'} |
        v' \text{\,children of\,} v\}$}
        \EndFunction{}
    \end{algorithmic}
\end{algorithm}

\section{Model}

In this section, we discuss the model established to approach this configuration
problem. First we defined a structure for a controled sector and all possible
transitions through time. Then a workload model is defined. And finally we
determined a cost per partition and a cost function aimed to be minimized.

\subsection{State}



\subsection{workload}

$p_{low}$
$p_{normal}$
$p_{high}$

\subsection{Partition cost and cost function}

In order to evaluate a given partition $P$ at time $t$, a cost $C(P, t)$ needs
to be defined. This cost depend on the workload in each the sector. We give the
following intermediate definitions to represent a high (respectively normal
and low) cost for the partition :
\begin{itemize}
    \item $c_+(P, t) = \sum_{S \in P_t} \delta_{h}(S, t) * p_{high}^{S, t} * |S|^2$
    \item $c_=(P, t) = \sum_{S \in P_t} \delta_{n}(S, t) * p_{norm}^{S} * |S|^{-2}$
    \item $c_-(P, t) = \sum_{S \in P_t} \delta_{l}(S, t) * p_{low}^{S, t} * |S|^{-2}$
\end{itemize}
with $\delta_{h}(P, t)$ (resp. $\delta_{n}(P_t)$ and $\delta_{l}(P_t)$) equal 1
if the probability $p_{high}$ (resp. $p_{normal}$ and $p_{low}$) is superior to
the two other, and 0 otherwise.

With

\section*{Notations}

\begin{itemize}
    \item $m$ : elementary module
    \item $S$ : sector control position, group of modules
    \item $P$ : partition of the airspace, group of sectors
    \item $t$ : current time
    \item $C(P, t)$ : Cost of a given partition $P$ at time $t$
    \item $s$ : state, in this article a partition $P$ and a time $t$
    \item $h(s)$ : heuristic that gives for a state $s$ an estimation of the cost
    \item $\mu_{F, a}$ : mean of all reward comming from node $F$ with action $a$
    \item $T_F$ : number of simuation where the final path include the node $F$
    \item $T_{F, a}$ : number of simuation where the final path include the node $F$ with action $a$
\end{itemize}


\bibliography{article}
\bibliographystyle{plain}
\end{document}
